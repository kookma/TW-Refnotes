author: Mohammad Rahmani
core-version: >=5.2.1
description: References, citations, footnotes and abbreviations in Tiddlywiki
name: Refnotes
plugin-type: plugin
source: https://github.com/kookma/TW-Refnotes
tags: 
title: $:/plugins/kookma/refnotes
type: application/json
version: 1.8.5

{"tiddlers":{"$:/plugins/kookma/refnotes/history":{"title":"$:/plugins/kookma/refnotes/history","tags":"","type":"text/vnd.tiddlywiki","text":"Full change log  https://kookma.github.io/TW-Refnotes/#ChangeLog\n\n* ''1.8.1'' -- 2022.06.03 -- many improvements to APA7 and BibTeX support in Refnotes\n* ''1.8.0'' -- 2022.05.27 -- many improvements, refrence manager has APA7 as default style\n* ''1.7.4'' -- 2022.05.18 -- stable release based on TW 5.2.2, minor bugs fixed\n* ''1.7.2'' -- 2021.09.19 -- stable release based on TW 5.2.0\n* ''1.6.0'' -- 2021.04.02 -- development (beta) of new release\n* ''1.0.3'' -- 2019.03.20 -- first stable release\n"},"$:/plugins/kookma/refnotes/license":{"title":"$:/plugins/kookma/refnotes/license","tags":"","type":"text/vnd.tiddlywiki","text":"Distributed under an MIT license.\n\nCopyright (c) 2019-2021 [[Mohammad Rahmani|https://github.com/kookma]]\n\n<<<\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n<<<"},"$:/plugins/kookma/refnotes/macros/abbr":{"title":"$:/plugins/kookma/refnotes/macros/abbr","tags":"$:/tags/Macro","type":"text/vnd.tiddlywiki","text":"\\define abbr(term:\"\", dict:\"Glossary\")\n<$set name=\"abbreviation\" \n tiddler=<<__dict__>>\n index=<<__term__>>\n emptyValue=\"Term not found\">\n <span class=refnotes-abbr><abbr title=<<abbreviation>> ><$text text=<<__term__>> /></abbr></span>\n</$set>\n\\end\n"},"$:/plugins/kookma/refnotes/macros/apa/authors":{"title":"$:/plugins/kookma/refnotes/macros/apa/authors","code-body":"yes","tags":"","type":"text/vnd.tiddlywiki","text":"\\define show-authors-in-citation(conjunction:\"&\")\n<!-- used in ref macro APA7 -->\n<$let authorlist=      {{{ [<__tid__>get[bibtex-author]]     }}}\n      number-authors=  {{{ [<authorlist>split[ and ]!is[blank]count[]] }}}\n>\n<!-- single authors -->\n<$list filter=\"[<number-authors>compare:number:eq[1]]\" variable=null>\n<$list filter=\"[<authorlist>split[ and ]first[]]\" variable=author>\n<<authorName \"LastName\">>\n</$list>\n</$list>\n\n<!-- two authors -->\n<$list filter=\"[<number-authors>compare:number:eq[2]]\" variable=null>\n<$list filter=\"[<authorlist>split[ and ]first[]]\" variable=author><<authorName \"LastName\">> $conjunction$</$list>\n<$list filter=\"[<authorlist>split[ and ]last[]]\"  variable=author><<authorName \"LastName\">></$list>\n</$list>\n\n<!-- multiple authors -->\n<$list filter=\"[<number-authors>compare:number:gt[2]]\" variable=null>\n<$list filter=\"[<authorlist>split[ and ]first[]]\" variable=author>\n<<authorName \"LastName\">> et al.\n</$list>\n</$list>\n\n<!-- no author, use three words of title -->\n<$list filter=\"[<number-authors>compare:number:eq[0]]\" variable=null>\n<$text text={{{ [<__tid__>get[bibtex-title]split[ ]!is[blank]first[3]join[ ]] :else[<__tid__>]}}}/>\n</$list>\n</$let>\n\\end\n\n\n\\define parse-fullname()\n<!-- parse author full name and returns: last_name, first_name middle_name \n     it handles nobiliary particle like: Lugwig von Beethoven\n-->\n<!-- return the same name if it is stored in BibTeX method 2: https://www.bibtex.com/f/author-field/ -->\n<$list filter=\"[<author>!search[,]]\" emptyMessage=<<author>> variable=null>\n<$let \n   pattern1=\"\\s+([a-z][a-zA-Z]*?)\\s+\"\n   pname={{{\n            [<author>search-replace:g:regexp<pattern1>,[ $1°]]\n           +[splitregexp[\\s]trim[]]\n           +[search-replace:g:regexp[°],[ ]]\n           +[join[°_°]]\n  }}}\n><$text text={{{ [<pname>split[°_°]!is[blank]last[]addsuffix[,]] [<pname>split[°_°]!is[blank]butlast[]] +[join[ ]] }}}/>\n</$let>\n</$list>\n\\end\n\n\n<!-- Macros for reference list -->\n\\define authorName(format:\"\")\n<!-- display a single author name in form of Family, F.N. \n     it can also send the last name only (surname) used in show-authors-in-citation macro\n-->\n\\whitespace trim\n<$wikify name=pname text=<<parse-fullname>> >\n<$let last=    {{{ [<pname>split[,]!is[blank]trim[]first[]]}}}\n      initials={{{ [<pname>split[,]!is[blank]trim[]butfirst[]split[ ]!is[blank]] :map[split[]!is[blank]first[]addsuffix[.]] +[join[ ]]}}}\n      dispname={{{ [<last>addsuffix[, ]addsuffix<initials>] }}}\n>\n<$list filter=\"[<__format__>!match[LastName]]\" variable=null emptyMessage=<<last>>><<dispname>></$list>\n</$let>\n</$wikify>\n\\end\n\n\\define show-authors-in-references()\n<!-- used in template -->\n<$let authorslist=     {{!!bibtex-author}}\n      number-authors=  {{{ [<authorslist>split[ and ]!is[blank]count[]] }}}\n      >\t\t\n<$set name=authors filter=\"[<authorslist>split[ and ]trim[]]\" >\t\n<!-- single author ---------->\n<$list filter=\"[<number-authors>compare:integer:eq[1]]\" variable=null>\n<$vars author={{{ [enlist<authors>last[]] }}}><<authorName>></$vars>\n</$list>\n<!-- multi authors ---------->\n<$list filter=\"[<number-authors>compare:integer:gt[1]]\" variable=null>\n<$list filter=\"[enlist<authors>butlast[]]\" variable=author>\n<<authorName>>,\n</$list>\n<$vars author={{{ [enlist<authors>last[]] }}}>& <<authorName>></$vars>\n</$list>\n<!-- no author, use three words of title -->\n<$list filter=\"[<number-authors>compare:number:eq[0]]\" variable=null>\n<$text text={{{ [{!!bibtex-title}split[ ]!is[blank]first[3]join[ ]] :else[[Unknown author]]}}}/>\n</$list>\n</$set>\n</$let>\t\t\t\n\\end\n\n\n"},"$:/plugins/kookma/refnotes/macros/apa/bibliography":{"title":"$:/plugins/kookma/refnotes/macros/apa/bibliography","tags":"$:/tags/Macro","type":"text/vnd.tiddlywiki","text":"\\define bibliography(citedfilter:\"[<currentTiddler>]\", furtherfilter:\"\", class:\"ref-list\")\n\\import $:/plugins/kookma/refnotes/macros/apa/bibliography-helper\n<!-- populate all citations in given tiddler or list of tiddlers (given scope through citedfilter) -->\n<$wikify name=\"works-cited\" text=<<find-cited-works>> >\n<!-- generate the reference list/bibliograpgy -->\n<ol class=\"$class$\">\n<$list filter=\"[enlist<works-cited>][subfilter<__furtherfilter__>]:and[sort[]]\" variable=\"reference\">\n<<display-single-reference>>\n</$list>\n</ol>\n</$wikify>\n\\end\n\n<!-- see $:/plugins/kookma/refnotes/macros/apa/bibliography-helper for utility macros -->"},"$:/plugins/kookma/refnotes/macros/apa/bibliography-helper":{"title":"$:/plugins/kookma/refnotes/macros/apa/bibliography-helper","code-body":"yes","tags":"","type":"text/vnd.tiddlywiki","text":"\\define find-cited-works()\n\\import $:/plugins/kookma/refnotes/macros/bibtex/find-refs\n<$list filter=<<__citedfilter__>> >\n<$macrocall $name=\"find-refs\" thisTiddler=<<currentTiddler>> />\n</$list>\n\\end\n\n\\define display-single-reference()\n\\import $:/plugins/kookma/refnotes/macros/apa/authors\n<$let currentType={{{[<reference>get[bibtex-entry-type]lowercase[]] ~[[miscellaneous]]}}} >\n<$set name=\"bodyLookup\" \n      filter=\"[all[tiddlers+shadows]tag[$:/tags/Refnotes/ReflistTemplate]contains:list<currentType>] +[limit[1]get[title]]\"\n      value=<<bodyLookup>> \n      emptyValue=\"$:/plugins/kookma/refnotes/templates/reflist/apa/default\">\n<$transclude tiddler=<<bodyLookup>> field=\"text\" mode=\"inline\"/>\n</$set>\n</$let>\n\\end"},"$:/plugins/kookma/refnotes/macros/apa/ref":{"title":"$:/plugins/kookma/refnotes/macros/apa/ref","tags":"$:/tags/Macro","type":"text/vnd.tiddlywiki","text":"\\define ref(tid, type:\"p\", pages:\"\")\n\\import $:/plugins/kookma/refnotes/macros/apa/authors\n\\import $:/plugins/kookma/refnotes/macros/apa/ref-helper\n\\whitespace trim\n<$set name=\"ref-tid\" tiddler=<<__tid__>> field=\"title\" emptyValue=\"RefNotFound\">\n<div class=\"refnotes-tooltip refcls\">\n<$reveal type=\"match\" default=<<ref-tid>> text=\"RefNotFound\">\n<$link overrideClass=\"link-refcls\">[<$view tiddler=<<__tid__>> field=\"title\"/>]</$link>\n<div class=\"refnotes-tooltiptext ref-notfound\"><b>Warning</b>: Reference Not Found.<br>Click to create it:<<create-notexisted-ref \"$tid$\">></div>\n</$reveal>\n<$reveal type=\"nomatch\" default=<<ref-tid>> text=\"RefNotFound\">\n<$list filter=\"[[$type$]lowercase[]match[p]]\" variable=null><<parenthetical>></$list>\n<$list filter=\"[[$type$]lowercase[]match[n]]\" variable=null><<narrative>></$list>\n<$list filter=\"[[$type$]lowercase[]match[m]]\" variable=null><<multiwork-parenthetical>></$list>\n<div class=\"refnotes-tooltiptext\">\n<$macrocall $name=\"displayref-onhover\" refTid=<<ref-tid>> />\n</div>\n</$reveal>\n</div>\n</$set>\n\\end\n\n<!-- cite is a synonym for ref macro -->\n\\define cite(tid, type:\"p\", pages:\"\") <$macrocall $name=ref tid=<<__tid__>> type=<<__type__>> pages=<<__pages__>> />\n\n<!-- for helper macros see $:/plugins/kookma/refnotes/macros/apa/ref-helper -->"},"$:/plugins/kookma/refnotes/macros/apa/ref-helper":{"title":"$:/plugins/kookma/refnotes/macros/apa/ref-helper","code-body":"yes","tags":"","type":"text/vnd.tiddlywiki","text":"<!-- This tiddler contains helper macros used in $:/plugins/kookma/refnotes/macros/apa/ref -->\n\n<!-- parenthetical in text citation -->\n\\define parenthetical()\n<$wikify name=authors text=<<show-authors-in-citation>> >\n(<$text text={{{ [<authors>trim[]addsuffix[, ]] }}}/><$text text={{{ [<__tid__>get[bibtex-year]] :else[[n.d.]] }}}/><$text text={{{[<__pages__>!is[blank]then<__pages__>addprefix[, ]]}}}/>)\n</$wikify>\n\\end\n\n<!-- narrative in text citation -->\n\\define narrative()\n<$wikify name=authors text=<<show-authors-in-citation and>> >\n<$text text={{{ [<authors>trim[]addsuffix[ ]] }}}/>(<$text text={{{ [<__tid__>get[bibtex-year]] :else[[n.d.]] }}}/><$text text={{{[<__pages__>!is[blank]then<__pages__>addprefix[, ]]}}}/>)\n</$wikify>\n\\end\n\n<!-- multiwork parenthetical in text citation -->\n\\define multiwork-parenthetical()\n<$wikify name=authors text=<<show-authors-in-citation>> >\n<$text text={{{ [<authors>trim[]addsuffix[, ]] }}}/><$text text={{{ [<__tid__>get[bibtex-year]] :else[[n.d.]] }}}/><$text text={{{[<__pages__>!is[blank]then<__pages__>addprefix[, ]]}}}/>\n</$wikify>\n\\end"},"$:/plugins/kookma/refnotes/macros/apa/showrefs":{"title":"$:/plugins/kookma/refnotes/macros/apa/showrefs","tags":"$:/tags/Macro","type":"text/vnd.tiddlywiki","text":"\\define showrefs(filter:[<currentTiddler>] title:Empty class:ref-list emptyMessage)\n\\import $:/plugins/kookma/refnotes/macros/apa/authors\n\\import $:/plugins/kookma/refnotes/macros/bibtex/find-refs\n<$let leftDelimiter1=\"<<ref \" leftDelimiter2=\"<<cite \">\n<$list filter=\"[subfilter<__filter__>search:text:literal<leftDelimiter1>][subfilter<__filter__>search:text:literal<leftDelimiter2>]:and[limit[1]]\" emptyMessage=<<__emptyMessage__>>variable=null>\n<$reveal tag=div type=nomatch text=<<__title__>>default=Empty>\n<h2>$title$</h2>\n</$reveal>\n<!---->\n<$wikify text=\"\n<$list filter=<<__filter__>>>\n<$macrocall thisTiddler={{!!title}}$name=find-refs/>\n</$list>\n\"name=mylist>\n<!---->\n<ol class=\"$class$\">\n<$list filter=\"[enlist<mylist>trim[]sort[]]\"variable=reference>\n\n<$let currentType={{{[<reference>get[bibtex-entry-type]lowercase[]]~miscellaneous}}}>\n<$set filter=\"[[$:/tags/Refnotes/ReflistTemplate]tagging[]contains:list<currentType>nth[]get[title]]\"value=<<bodyLookup>>emptyValue=\"$:/plugins/kookma/refnotes/templates/reflist/apa/default\"name=bodyLookup>\n<$transclude tiddler=<<bodyLookup>>field=text mode=inline/>\n</$set>\n</$let>\n\n</$list>\n</ol>\n</$wikify>\n</$list>\n\n\\end"},"$:/plugins/kookma/refnotes/macros/bibtex/find-refs":{"title":"$:/plugins/kookma/refnotes/macros/bibtex/find-refs","code-body":"yes","tags":"","type":"text/vnd.tiddlywiki","text":"<!-- find-refs looks into thisTiddler text and finds all forms of <<ref .>> and <<cite .>> -->\n\\define find-refs(thisTiddler)\n<$vars\nregexp=\"(?g)<<ref .+?>>\"  regexpc =\"(?g)<<cite .+?>>\"\nregexp2='<<ref\\s+(.*?)>>' regexp2c='<<cite\\s+(.*?)>>'\nregexp3='^\"(.*?)\"'\nregexp4=\"^'(.*?)'\"\nregexp5=\"\\[\\[(.*?)\\]\\]\"\nregexp6=\"^(.*?)\\s\"\n>\n<$list filter=\"[<__thisTiddler__>regexprefs:text<regexp>][<__thisTiddler__>regexprefs:text<regexpc>]\">\n<$list filter=\"[all[current]regexprefs<regexp2>][all[current]regexprefs<regexp2c>]\">\n<$list filter=\"\"\"\n     [all[current]regexprefs<regexp3>] \n:else[all[current]regexprefs<regexp4>]\n:else[all[current]regexprefs<regexp5>]\n:else[all[current]regexprefs<regexp6>]\n:else[all[current]]\n:and[format:titlelist[]]\n\"\"\" variable=p >\n<$text text=<<p>> />\n</$list>\n</$list>\n</$list>\n</$vars>\n\\end"},"$:/plugins/kookma/refnotes/macros/bibtex/process-entries":{"title":"$:/plugins/kookma/refnotes/macros/bibtex/process-entries","tags":"$:/tags/Macro","type":"text/vnd.tiddlywiki","text":"\\define title-slugify()\n<$vars curTitle=<<currentTiddler>> newTitle={{{[<currentTiddler>slugify[]]}}}>\n<$list filter=\"[<curTitle>!match<newTitle>]\" variable=null>\n<$action-sendmessage $message=\"tm-rename-tiddler\" from=<<currentTiddler>> to=<<newTitle>> />\n</$list>\n</$vars>\n\\end\n\n\\define correct-doi()\n<$list filter=\"[<currentTiddler>has[bibtex-doi]get[bibtex-doi]!prefix[https://doi.org]]\" variable=null>\n<$action-setfield $field=\"bibtex-doi\" $value={{{ [{!!bibtex-doi}addprefix[https://doi.org/]] }}}/>\n</$list>\n\\end\n\n\\define tag-entries()\n<!-- change entry type to lower case -->\n<$action-setfield $tiddler=<<currentTiddler>> bibtex-entry-type={{{[<currentTiddler>get[bibtex-entry-type]lowercase[]]}}} />\n<!-- add bibtex-entry -->\n<$fieldmangler>\n<$action-sendmessage $message=\"tm-add-tag\" $param=\"bibtex-entry\" />\n</$fieldmangler>\n\\end\n\n\\define process-entries(title:\"Process New Bibtex Entries\")\n<$button>  $title$\n<$wikify name=chkDuplicates text=<<check-duplicates>> >\n<$action-confirm $message=<<chkDuplicates>> >\n<$list filter=\"[has[bibtex-title]!tag[bibtex-entry]]\">\n<<tag-entries>>\n<<title-slugify>>\n<<correct-doi>>\n</$list>\n</$action-confirm>\n</$wikify>\n</$button>\n\\end\n\n<!-- check duplicate reference tiddlers before slugifying -->\n\\define check-duplicates()\n<$list filter=\"[has[bibtex-title]duplicateslugs[]limit[1]]\" emptyMessage=\"There are no duplicate entries, do you want to process new entries?\">\nThe following tiddlers have duplicate slugs, so they will overwrite eachother, do you want to continue?\n\n<$list filter=\"[has[bibtex-title]duplicateslugs[]] +[join[, ]]\" template=\"$:/core/ui/ListItemTemplate\"/>\n</$list>\n\\end"},"$:/plugins/kookma/refnotes/macros/bibtex/regexprefs.js":{"title":"$:/plugins/kookma/refnotes/macros/bibtex/regexprefs.js","text":"/*\\\ntitle: $:/plugins/kookma/macro/bibtex/regexprefs.js\ntype: application/javascript\nmodule-type: filteroperator\n\nFilter operator for regexp matching and returning result. All results are returned if global flag used. All sub-groups are returned if not global and sub-group hits are found.\n\nThis is a hacked version of core macro: $:/core/modules/filters/regexp.js\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n/*\nExport our filter function\n*/\nexports.regexprefs = function(source,operator,options) {\n\tvar results = [],\n\t\tfieldname = (operator.suffix || \"title\").toLowerCase(),\n\t\tregexpString, regexp, flags = \"\", match, global,\n\t\tgetFieldString = function(tiddler,title) {\n\t\t\tif(tiddler) {\n\t\t\t\treturn tiddler.getFieldString(fieldname);\n\t\t\t} else if(fieldname === \"title\") {\n\t\t\t\treturn title;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t};\n\t// Process flags and construct regexp\n\tregexpString = operator.operand;\n\tmatch = /^\\(\\?([gim]+)\\)/.exec(regexpString);\n\tif(match) {\n\t\tflags = match[1];\n\t\tregexpString = regexpString.substr(match[0].length);\n\t} else {\n\t\tmatch = /\\(\\?([gim]+)\\)$/.exec(regexpString);\n\t\tif(match) {\n\t\t\tflags = match[1];\n\t\t\tregexpString = regexpString.substr(0,regexpString.length - match[0].length);\n\t\t}\n\t}\n\ttry {\n\t\tregexp = new RegExp(regexpString,flags);\n\t} catch(e) {\n\t\treturn [\"\" + e];\n\t}\n\n\tglobal = /g/.test(flags) ;\n\n\t// Process the incoming tiddlers\n\tif(operator.prefix === \"!\") {\n\t\tsource(function(tiddler,title) {\n\t\t\tvar text = getFieldString(tiddler,title);\n\t\t\tif(text !== null) {\n\t\t\t\tif(!regexp.exec(text)) {\n\t\t\t\t\tresults.push(title);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t} else {\n\t\tsource(function(tiddler,title) {\n\t\t\tvar text = getFieldString(tiddler,title), ret=\"\";\n\t\t\tif(text !== null) {\n\t\t\t\tret = text.match(regexp) ;\n\t\t\t\tif(ret !==null) {\n\t\t\t\t\tif(global) {\n\t\t\t\t\t\tresults.push.apply(results,ret)  ; //DEBUG\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// if there are  sub groups return sub groups START\n\t\t\t\t\t\tif(ret.length > 1)  {     // return sub groups\n\t\t\t\t\t\t\tresults = results.concat(ret.slice(1)) ;\n\t\t\t\t\t\t} else { // if no sub-groups\n\t\t\t\t\t\t\tresults.push(ret[0]);\n\t\t\t\t\t\t} \n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\treturn results;\n};\n\n})();","type":"application/javascript","module-type":"filteroperator"},"$:/plugins/kookma/refnotes/macros/bibtex/utility":{"title":"$:/plugins/kookma/refnotes/macros/bibtex/utility","tags":"$:/tags/Macro","type":"text/vnd.tiddlywiki","text":"\\define displayref-onhover(refTid)\n<$set name=\"ref-tid\" value=<<__refTid__>> >\n<$link overrideClass=\"link-refcls\" to=<<ref-tid>> >\n<$list filter=\"[<ref-tid>get[bibtex-entry-type]lowercase[]!match[website]]\" variable=null\nemptyMessage=\"\"\"<span class=\"ref-author\"><$view tiddler=<<ref-tid>> field=\"bibtex-url\"/>.</span>\"\"\">\n<span class=\"ref-author\"><$view tiddler=<<ref-tid>> field=\"bibtex-author\"/>.</span>\n</$list>\n</$link>\n<$view tiddler=<<ref-tid>> field=\"bibtex-title\"/>. (<$view tiddler=<<ref-tid>> field=\"bibtex-year\"/>)\n</$set>\n\\end\n\n\\define create-notexisted-ref(refTid)\n<$set name=\"myTid\" value=<<__refTid__>> >\n<$button class=\"tc-btn-invisible tc-tiddlylink\">\n<$action-sendmessage $message=\"tm-new-tiddler\"\n    title=<<myTid>> \n    bibtex-author=\"\" bibtex-year=\"\"\n    bibtex-title=\"\"  bibtex-abstract=\"\"\n    bibtex-entry-type=\"\" bibtex-keywords=\"\"\n    bibtex-doi=\"\" bibtex-url=\"\"\n    tags=\"bibtex-entry\"\n    /><<myTid>> \n</$button>\n</$set>    \n\\end"},"$:/plugins/kookma/refnotes/macros/find":{"title":"$:/plugins/kookma/refnotes/macros/find","tags":"$:/tags/Macro","type":"text/vnd.tiddlywiki","text":"\\define find(text, begin, end, output:\"simple\", mode:\"all\")\n<$vars \n  fulltext=<<__text__>>\n  start=<<__begin__>>\n  stop=<<__end__>>\n  output-macro=<<__output__>>\n>\n<$list variable=p1 filter=\"[<fulltext>splitbefore<start>]\">\n<$list variable=p2 filter=\"[<fulltext>removeprefix<p1>]\">\n<$list variable=p3 filter=\"[<p2>splitbefore<stop>removesuffix<stop>]\">\n<$macrocall $name=<<output-macro>> p=<<p3>> />\n<$reveal type=\"match\" text=\"all\" default=<<__mode__>> >\n<$macrocall $name=\"find\"\n  text={{{[<p2>removeprefix<p3>removeprefix<stop>]}}}\n  begin=<<start>>\n  end=<<stop>>\n  output=<<output-macro>>\n/>\n</$reveal>\n</$list>\n</$list>\n</$list>\n</$vars>\n\\end\n\n\\define simple(p)\n<$text text=<<__p__>> />\n\\end\n\n\\define simple-list(p)\n<li><$text text=<<__p__>>/></li>\n\\end\n"},"$:/plugins/kookma/refnotes/macros/footnote":{"title":"$:/plugins/kookma/refnotes/macros/footnote","tags":"$:/tags/Macro","type":"text/vnd.tiddlywiki","text":"\\define fnote(note)\n<div class=\"refnotes-tooltip refnotes-footnote\"><div class=\"refnotes-tooltiptext\">$note$</div></div>\n\\end"},"$:/plugins/kookma/refnotes/macros/numbered/refnum":{"title":"$:/plugins/kookma/refnotes/macros/numbered/refnum","tags":"","type":"text/vnd.tiddlywiki","text":"\\define refnum(tid)\n<$set name=\"ref-tid\" tiddler=<<__tid__>> field=\"title\" emptyValue=\"RefNotFound\">\n<div class=\"refnotes-tooltip refcls\">\n<$reveal type=\"match\" default=<<ref-tid>> text=\"RefNotFound\">\n<$link overrideClass=\"link-refcls\">\n[<$view tiddler=<<__tid__>> field=\"title\"/>]\n</$link>\n<div class=\"refnotes-tooltiptext ref-notfound\"><b>Warning</b>: Reference Not Found.<br>Click to create it:<<create-notexisted-ref \"$tid$\">></div>\n</$reveal>\n<$reveal type=\"nomatch\" default=<<ref-tid>> text=\"RefNotFound\">\n[<$view tiddler=<<__tid__>> field=\"caption\"><$view tiddler=<<__tid__>> field=\"title\"/></$view>]\n<div class=\"refnotes-tooltiptext\">\n<$macrocall $name=\"displayref-onhover\" refTid=<<ref-tid>> />\n</div>\n</$reveal>\n</div>\n</$set>\n\\end\n"},"$:/plugins/kookma/refnotes/macros/search-ui":{"title":"$:/plugins/kookma/refnotes/macros/search-ui","tags":"","type":"text/vnd.tiddlywiki","text":"\\define searchTid() $:/temp/refnotes/search\n\\define bibtexFields() [!is[shadow]!is[system]has[bibtex-title]fields[]prefix[bibtex-]sort[]]\n\\define mainFields() bibtex-title bibtex-author bibtex-year\n\\define searchUi()\n<div class=\"tc-search\">\n<$edit-text tiddler=<<searchTid>> type=\"search\" tag=\"input\" placeholder=\"search terms\" default=\"\"/> <$select field=\"field\" tiddler=<<searchTid>> default=\"bibtex-author\">\n<$set name=allfields filter= \"[subfilter<bibtexFields>split[ ]join[,]]\" >\n<option value=<<allfields>> >all fields</option>\n</$set>\n<optgroup label=\"Main fields\">\n<$list filter=\"[enlist<mainFields>removeprefix[bibtex-]]\" variable=\"field\">\n<option value={{{[<field>addprefix[bibtex-]]}}} ><<field>></option>\n</$list>\n</optgroup>\n<optgroup label=\"Other fields\">\n<$list filter=\"[subfilter<bibtexFields>] -[enlist<mainFields>] +[removeprefix[bibtex-]]\" variable=\"field\">\n<option value={{{[<field>addprefix[bibtex-]]}}} ><<field>></option>\n</$list>\n</optgroup>\n</$select>\n\n<$reveal state=<<searchTid>> type=\"nomatch\" text=\"\">\n<$button class=\"tc-btn-invisible\">\n<$action-setfield $tiddler=<<searchTid>> text=\"\"/>\n{{$:/core/images/close-button}}\n</$button>\n</$reveal>\n</div>\n\\end"},"$:/plugins/kookma/refnotes/macros/showabbrs":{"title":"$:/plugins/kookma/refnotes/macros/showabbrs","tags":"$:/tags/Macro","type":"text/vnd.tiddlywiki","text":"\\define showabbrs(filter:\"[<currentTiddler>]\", dtiddler:\"Glossary\", title:\"Empty\", emptyMessage:\"\")\n<$wikify name=\"indexes\" text=<<find-all-items>> > \n<$macrocall $name=\"abbr-list\" indexes=<<indexes>> dtiddler=<<__dtiddler__>>  title=<<__title__>> emptyMessage=<<__emptyMessage__>> />\n</$wikify>\n\\end\n\n\\define patterndb() \\[\\[|\\]\\]\n\\define pattern()  ('.*?'|\".*?\"|\\S+)\n\\define output-item(p)\n<$list filter=\"\"\"[<__p__>search-replace:g:regexp<patterndb>,[\"]]\"\"\" variable=pars>\n<$list filter=\"\"\"[<pars>trim[]!prefix[dict:]search-replace[term:],[]splitregexp<pattern>trim[]!is[blank]!prefix[dict:]first[]]\"\"\">\n<$text text=<<currentTiddler>>/>\n</$list>\n<$list filter=\"\"\"[<pars>trim[]prefix[dict:]search-replace[term:],[]splitregexp<pattern>trim[]!is[blank]!prefix[dict:]last[]]\"\"\">\n<$text text=<<currentTiddler>>/>\n</$list>\n</$list>\n\\end\n\n\\define find-all-items()\n<$list filter=<<__filter__>> >\n<$macrocall $name=\"find\" text={{!!text}} begin=\"<<abbr \" end=\">>\" output=\"output-item\"/>\n</$list>\n\\end\n\n\n\\define abbr-list(dtiddler, indexes, title:\"Empty\", emptyMessage:\"\")\n<$list filter=\"[<indexes>limit[1]]\" variable=null emptyMessage=<<__emptyMessage__>> ><!-- check to see if there is any abbreviations -->\n<$reveal tag=\"div\" type=\"nomatch\" default=\"Empty\" text=<<__title__>> >\n<h2><$text text=<<__title__>> /></h2>\n</$reveal>\n<table class=\"refnotes-table-borderless\">\n<$list filter=\"\"\"[subfilter<__indexes__>]\"\"\" variable=\"item\">\n<tr>\n<td class=\"refnotes-abbr-term\"><$text text=<<item>> /></td>\n<td>\n <$set name=\"term\" tiddler=<<__dtiddler__>>  index=<<item>>  emptyValue=<<term-not-found>> >\n   <<term>>\n </$set>\n</td>\n</tr>\n</$list>\n</table>\n</$list>\n\\end\n\n\n\\define term-not-found()\n<span class=\"refnotes-abbr-term-not-found\">Term not found</span>\n\\end\n\n\n"},"$:/plugins/kookma/refnotes/macros/showfnotes":{"title":"$:/plugins/kookma/refnotes/macros/showfnotes","tags":"$:/tags/Macro","type":"text/vnd.tiddlywiki","text":"\\define showfnotes(filter:\"[<currentTiddler>]\", title:\"Empty\" class:\"fnote-list\", emptyMessage:\"\")\n<$vars leftDelimiter=\"<<fnote \">\n<$list filter=\"[subfilter<__filter__>search:text:literal<leftDelimiter>limit[1]]\" variable=null emptyMessage=<<__emptyMessage__>> ><!-- check to see if there is any footnote -->\n<$reveal tag=\"div\" type=\"nomatch\" default=\"Empty\" text=<<__title__>> >\n<h2>$title$</h2>\n</$reveal>\n<ol class=\"$class$\">\n<$list filter=<<__filter__>> >\n<$macrocall $name=\"find\" \n   text={{!!text}}\n   begin=\"<<fnote \"\n   end=\">>\"\n   output=\"output-fnote\"\n/>\n</$list>\n</ol>\n</$list>\n</$vars>\n\\end\n\n\\define output-fnote(p)\n<$vars output=$p$>\n<li><<output>></li>\n</$vars>\n\\end\n\n"},"$:/plugins/kookma/refnotes/macros/stretch-text":{"title":"$:/plugins/kookma/refnotes/macros/stretch-text","tags":"","type":"text/vnd.tiddlywiki","text":"\\define tmpTidDetails() $:/temp/refnotes/library/$(currentTiddler)$\n\n\\define stretchText(text, title:\"...\")\n<$button class=\"tc-btn-invisible\">$title$\n<$action-listops $tiddler=<<tmpTidDetails>> $field=\"text\" $subfilter=\"+[toggle[show]]\" />\n</$button>&nbsp;<$reveal type=\"match\" stateTitle=<<tmpTidDetails>> sateField=text text=\"show\">$text$</$reveal>\n\\end\n"},"$:/plugins/kookma/refnotes/readme":{"title":"$:/plugins/kookma/refnotes/readme","tags":"","type":"text/vnd.tiddlywiki","text":"; Refnotes\nRefnotes is a Tiddlywiki plugin to create and manage footnotes, abbreviations, citations, and references. Refnotes can create bibliography, but for the best performance, and to use import bibtex entries, the use of the official ''bibtex importer'' plugin is required. APA7 style is used as default. Refnotes output is very close to APA7 standard.\n\n;Code and demo\nFor learning Refnotes features, syntax, tutorial and examples see the plugin demo and code pages\n\n* Demo: https://kookma.github.io/TW-Refnotes/\n* Code: https://github.com/kookma/TW-Refnotes\n"},"$:/plugins/kookma/refnotes/styles/abbr":{"title":"$:/plugins/kookma/refnotes/styles/abbr","text":"/* Ref: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS3 */ \n.refnotes-abbr abbr[title] {\n\tcolor: inherit;\n\tfont-style: normal;\n\ttext-decoration: none;\n\tborder-bottom: 1px dotted #aaa;\n\tcursor: help;\n}\n\n.refnotes-abbr-term-not-found{\n/*\tcolor:red;*/\n\tfont-style: oblique;\n}\n\n.refnotes-abbr-term{\n/*\tcolor:blue;*/\n}\n\n/* Ref:https://aarontgrogg.com/lab/\nShow the title for small screen\n*/ \n/* this works based on the max-width*/\n@media only screen and (max-width: 960px) {\n.refnotes-abbr abbr:hover:after  { content: ' ('attr(title)')'; }\n}\n\n@media (hover: none) {\n/* Push the title attribute into generated content after the abbr. */\n.refnotes-abbr abbr[title]::after { \n content: ' ('attr(title)')'; }\n}\n","tags":"$:/tags/Stylesheet","type":"text/css"},"$:/plugins/kookma/refnotes/styles/bibtex":{"title":"$:/plugins/kookma/refnotes/styles/bibtex","tags":"$:/tags/Stylesheet","type":"text/vnd.tiddlywiki","text":".ref-nonumber{\n/* color:blue;*/\n font-size:90%;\n list-style-type:none;\n}\n\n.ref-nonumber li{\n  padding-bottom:8px;\n}\n\n.ref-list{\n/* color:blue;*/\n font-size:90%;\n}\n\n.link-refcls{\n font-weight:400;\n/* color:#00008B;*/ /*darkblue*/\n text-decoration:none;\n color: <<colour tiddler-link-foreground>>; \t\n}\n\n.refcls{\n/* color:#00008B;*/\n color: <<colour tiddler-link-foreground>>; \n/* text-transform: capitalize;*/\n}\n\n.ref-notfound{\n/*  color: #856404 !important;*/\n/*  background-color: #fff3cd !important;*/\n}\n\n.ref-author{\n/*  color:#00008B;*/ /*color for author in tooltip*/\n}"},"$:/plugins/kookma/refnotes/styles/bibtex-details":{"title":"$:/plugins/kookma/refnotes/styles/bibtex-details","text":".refnotes-details > summary{\n\tpadding-left:0;\n\tpadding-top:15px;\n\tpadding-bottom:15px;\n\twidth: 160px;\n\tcursor: pointer;\n\tfont-weight:bold;\n}\n\n","tags":"$:/tags/Stylesheet","type":"text/css"},"$:/plugins/kookma/refnotes/styles/bibtex-entryview":{"title":"$:/plugins/kookma/refnotes/styles/bibtex-entryview","text":"/* used for viewtemplate displaying the bibtex entry */\n.refnotes-bibtex-field{\n\tdisplay:table-row\n}\n.refnotes-bibtex-field > span{\n\tdisplay:table-cell\n}\n.refnotes-bibtex-field > span:first-of-type{\n\tfont-weight:bold;\n\tpadding-right:10px;\n\twhite-space: nowrap;\n}","tags":"$:/tags/Stylesheet","type":"text/css"},"$:/plugins/kookma/refnotes/styles/dropzone":{"title":"$:/plugins/kookma/refnotes/styles/dropzone","text":".bibtex-dropzone{\n\tmin-height:30px;\n\tmax-width:100%;\n\tmargin:4px auto;\n\tborder:2px dotted green;\n\ttext-align:center;\n}\n\n.bibtex-dropzone:focus {\n\tbackground: #fffedd;\n}","tags":"$:/tags/Stylesheet","type":"text/css"},"$:/plugins/kookma/refnotes/styles/footnote-counter":{"title":"$:/plugins/kookma/refnotes/styles/footnote-counter","text":"/*automatic counter for fnote macro. The counter resets at the begining of each tiddler*/\n.tc-tiddler-frame {\n  counter-reset: fnote-count;\n}\n.refnotes-footnote {\n  counter-increment: fnote-count;\n}\n.refnotes-footnote:after {\n  content: counter(fnote-count);\n  font-size:small;\n /* color:#0000ee;*/\n  vertical-align: super;\n  line-height: 1.5;\n  margin-left: -0.1em;\n}\n","tags":"$:/tags/Stylesheet","type":"text/css"},"$:/plugins/kookma/refnotes/styles/library":{"title":"$:/plugins/kookma/refnotes/styles/library","text":"/* in folding-editor*/\n.refnotes-library button svg{\n\tfont-size:0.8em;\n\tvertical-align: middle;\n\tmargin-right:0;\n\tmargin-left:0;\n\n}\n\n","tags":"$:/tags/Stylesheet","type":"text/css"},"$:/plugins/kookma/refnotes/styles/showfnotes":{"title":"$:/plugins/kookma/refnotes/styles/showfnotes","text":"/* Footnote class*/\n\n.fnote-list{\n/* color:blue;*/\n font-size:90%;\n}\n\n.fnote-pretty{\n display: block;\n  margin: 0.5em;\n  margin-right: auto;\n  width: 100% !important;\n  border-collapse: collapse;\n  padding: 15px 15px 15px 25px; /*left padding=25px*/\n  border-width:  0px;\n  border-style: solid;\n  border-left-width: 1px;\n  background-color:  rgb(255,248,220);\n  color: rgb(91,49,7);\n  line-height: 1.2em; \n  font-size:0.9em;\n}\n","tags":"$:/tags/Stylesheet","type":"text/css"},"$:/plugins/kookma/refnotes/styles/table-borderless":{"title":"$:/plugins/kookma/refnotes/styles/table-borderless","text":"/*Borderless table*/\n.refnotes-table-borderless, \n.refnotes-table-borderless th, \n.refnotes-table-borderless tr, \n.refnotes-table-borderless td{\n  border:0;\n}","tags":"$:/tags/Stylesheet","type":"text/css"},"$:/plugins/kookma/refnotes/styles/tooltip":{"title":"$:/plugins/kookma/refnotes/styles/tooltip","text":"/* tooltip class used for ref, fnote and other macros */\n.refnotes-tooltip {\n\tposition: relative;\n\tdisplay: inline-block;\n\tcursor: pointer; \n}\n\n.refnotes-tooltip .refnotes-tooltiptext{\n\tfont-size: 0.90em; /* change if it is too small */\n}\n\n.refnotes-tooltip .refnotes-tooltiptext {\n\tvisibility: hidden;\n\tbackground-color: #fff;\n\tcolor: #222222; \n\ttext-align: left;\n\tborder-radius: 2px;\n\tpadding: 5px 10px;\n\tmax-width: 30vw;\n\tmax-height:20em;\n\toverflow-y: auto;\n\tcursor: auto;\n\twidth: max-content;\n\twidth: -moz-max-content;\n\twidth: -webkit-max-content;\n\twidth: -o-max-content;\n\n\t/* Position the tooltip */\n\tposition: absolute;\n\tz-index: 1;\n\tbottom: 100%;\n\tleft: 50%;\n\tmargin-left: -40px;\n\tbox-shadow:0 4px 10px 0 rgba(0,0,0,0.2),0 4px 20px 0 rgba(0,0,0,0.19);\n}\n\n.refnotes-tooltip:hover .refnotes-tooltiptext {\n\tvisibility: visible;\n\t/*opacity: 0.9;*/\n}\n\n/* for small screens */\n\n@media screen and (max-width: 960px) {\n.refnotes-tooltip .refnotes-tooltiptext {\n    /* Position the tooltip */\n  \tposition:fixed;\n    top:0;\n    left: 0;\n    margin-left: 0px;\n    bottom: unset;\n    width:100%;\n    max-width: 100vw;\n    z-index: 9999;\n}  \n\n.refnotes-tooltip:hover .refnotes-tooltiptext {\n   opacity: 1;\n}  \n  \n}","tags":"$:/tags/Stylesheet","type":"text/css"},"$:/plugins/kookma/refnotes/templates/reflist/apa/article":{"title":"$:/plugins/kookma/refnotes/templates/reflist/apa/article","code-body":"yes","list":"article","tags":"$:/tags/Refnotes/ReflistTemplate","type":"text/vnd.tiddlywiki","text":"<$wikify name=bibtexEntryTiddler text=<<reference>> >\n<$set name=currentTiddler tiddler=<<bibtexEntryTiddler>> field=title emptyValue=\"RefNotFound\">\n<$reveal type=\"nomatch\" default=\"RefNotFound\" text=<<currentTiddler>> >\n<li><$link to=<<bibtexEntryTiddler>>><<show-authors-in-references>></$link> (<$text text={{{ [{!!bibtex-year}!is[blank]] :else[[n.d.]] }}}/>). <$text  text={{{ [{!!bibtex-title}lowercase[]sentencecase[]] }}} />. <span style=\"font-style:italic\"><$view field=\"bibtex-journal\"/></span>. <$view field=\"bibtex-volume\"/>. <$view field=\"bibtex-pages\"/>. <a href={{{[<currentTiddler>get[bibtex-doi]!prefix[https://doi.org/]addprefix[https://doi.org/]else{!!bibtex-doi}]}}} target=_blank><$view field=\"bibtex-doi\"/></a></li>\n</$reveal>\n<$reveal type=\"match\" default=\"RefNotFound\" text=<<currentTiddler>> >\n<li>Reference <b><$text text=<<reference>>/></b> NOT FOUND. Check your input.</li>\n</$reveal>\n</$set></$wikify>\n\n<!-- APA 7 \nAuthor. (Year). Title [Translated Title] [Type of Article] [Reviewed Item]|. Journal|, Volume|(Issue)|, Pages|, Article Number|.| `https://doi.org/`DOI (Reprint Edition) (Original Publication) (Errata)\n-->"},"$:/plugins/kookma/refnotes/templates/reflist/apa/book":{"title":"$:/plugins/kookma/refnotes/templates/reflist/apa/book","code-body":"yes","list":"book incollection","tags":"$:/tags/Refnotes/ReflistTemplate","type":"text/vnd.tiddlywiki","text":"\\define disp-bibtex-edition()\n<$list filter=\"[<currentTiddler>has[bibtex-edition]]\" variable=null>(<$view field=\"bibtex-edition\"/>).</$list>\n\\end\n\n\n<$wikify name=bibtexEntryTiddler text=<<reference>> >\n<$set name=currentTiddler tiddler=<<bibtexEntryTiddler>> field=title emptyValue=\"RefNotFound\">\n<$reveal type=\"nomatch\" default=\"RefNotFound\" text=<<currentTiddler>> >\n<li><$link to=<<bibtexEntryTiddler>>><<show-authors-in-references>></$link> (<$text text={{{ [{!!bibtex-year}!is[blank]] :else[[n.d.]] }}}/>). <span style=\"font-style:italic;\"><$text text={{{ [{!!bibtex-title}lowercase[]sentencecase[]] }}} /></span>. <<disp-bibtex-edition>> <$view field=\"bibtex-publisher\"/>.</li>\n</$reveal>\n<$reveal type=\"match\" default=\"RefNotFound\" text=<<currentTiddler>> >\n<li>Reference <b><$text text=<<reference>>/></b> NOT FOUND. Check your input.</li>\n</$reveal>\n</$set></$wikify>\n\n<!--\nAuthor. (Year). Title [Translated Title] (|Translator, Trans.;| Editor, Ed.^Eds.| Edition ed.,| Vol. Volume|)| [Type of Work]|. Publisher|. `https://doi.org/`DOI (Original Publication)\n-->"},"$:/plugins/kookma/refnotes/templates/reflist/apa/default":{"title":"$:/plugins/kookma/refnotes/templates/reflist/apa/default","code-body":"yes","tags":"$:/tags/Refnotes/ReflistTemplate","type":"text/vnd.tiddlywiki","text":"<$wikify name=bibtexEntryTiddler text=<<reference>> >\n<$set name=currentTiddler tiddler=<<bibtexEntryTiddler>> field=\"title\" emptyValue=\"RefNotFound\">\n<$reveal type=\"nomatch\" default=\"RefNotFound\" text=<<currentTiddler>> >\n<li><$link to=<<bibtexEntryTiddler>>><<show-authors-in-references>></$link> (<$text text={{{ [{!!bibtex-year}!is[blank]] :else[[n.d.]] }}}/>). <$text  text={{{ [{!!bibtex-title}lowercase[]sentencecase[]] }}} />.</li>\n</$reveal>\n<$reveal type=\"match\" default=\"RefNotFound\" text=<<currentTiddler>> >\n<li>Reference <b><$text text=<<reference>>/></b> NOT FOUND. Check your input.</li>\n</$reveal>\n</$set></$wikify>"},"$:/plugins/kookma/refnotes/templates/reflist/apa/inproceedings":{"title":"$:/plugins/kookma/refnotes/templates/reflist/apa/inproceedings","code-body":"yes","list":"inproceedings","tags":"$:/tags/Refnotes/ReflistTemplate","type":"text/vnd.tiddlywiki","text":"<$wikify name=bibtexEntryTiddler text=<<reference>> >\n<$set name=currentTiddler tiddler=<<bibtexEntryTiddler>> field=title emptyValue=\"RefNotFound\">\n<$reveal type=\"nomatch\" default=\"RefNotFound\" text=<<currentTiddler>> >\n<li><$link to=<<bibtexEntryTiddler>>><<show-authors-in-references>></$link> (<$text text={{{ [{!!bibtex-year}!is[blank]] :else[[n.d.]] }}}/>). <$text  text={{{ [{!!bibtex-title}lowercase[]sentencecase[]] }}} />. In <span style=\"font-style:italic\"><$view field=\"bibtex-booktitle\"/></span>. pp. <$view field=\"bibtex-pages\"/>. <a href={{{[<currentTiddler>get[bibtex-doi]]}}}><$view field=\"bibtex-doi\"/></a></li>\n</$reveal>\n<$reveal type=\"match\" default=\"RefNotFound\" text=<<currentTiddler>> >\n<li>Reference <b><$text text=<<reference>>/></b> NOT FOUND. Check your input.</li>\n</$reveal>\n</$set></$wikify>\n\n<!-- APA 7\nAuthor, A. A. (Date). Title of paper. In A. Editor & B. Editor (Eds.), Title of proceedings (page numbers). Publisher. DOI OR URL if relevant.\n-->"},"$:/plugins/kookma/refnotes/templates/reflist/apa/patent":{"title":"$:/plugins/kookma/refnotes/templates/reflist/apa/patent","code-body":"yes","list":"patent","tags":"$:/tags/Refnotes/ReflistTemplate","type":"text/vnd.tiddlywiki","text":"<$wikify name=bibtexEntryTiddler text=<<reference>> >\n<$set name=currentTiddler tiddler=<<bibtexEntryTiddler>> field=title emptyValue=\"RefNotFound\">\n<$reveal type=\"nomatch\" default=\"RefNotFound\" text=<<currentTiddler>> >\n<li><$link to=<<bibtexEntryTiddler>>><<show-authors-in-references>></$link> (<$text text={{{ [{!!bibtex-year}!is[blank]] :else[[n.d.]] }}}/>). <span style=\"font-style:italic;\"><$text text={{{ [{!!bibtex-title}lowercase[]sentencecase[]] }}} /></span>. (<$view field=\"bibtex-nationality\"/> Patent No. <$view field=\"bibtex-number\"/>). <a href={{!!bibtext-url}} target=_blank><$view field=\"bibtex-url\"/></a></li>\n</$reveal>\n<$reveal type=\"match\" default=\"RefNotFound\" text=<<currentTiddler>> >\n<li>Reference <b><$text text=<<reference>>/></b> NOT FOUND. Check your input.</li>\n</$reveal>\n</$set></$wikify>\n\n<!-- APA 7 ?? check this, it has issues\nAuthor. (Year). Patent Title (Country patent No. patent number). Institution. URL\n\n-->"},"$:/plugins/kookma/refnotes/templates/reflist/apa/thesis":{"title":"$:/plugins/kookma/refnotes/templates/reflist/apa/thesis","code-body":"yes","list":"thesis mastersthesis phdthesis","tags":"$:/tags/Refnotes/ReflistTemplate","type":"text/vnd.tiddlywiki","text":"\\define disp-thesis-type()\n\\whitespace trim\n<$list filter=\"[<currentTiddler>get[bibtex-entry-type]]\" variable=thesisType>\n<$text text={{{  \n               [<thesisType>match[mastersthesis]then[Master's thesis]]\n               [<thesisType>match[phdthesis]then[PhD thesis]]\n          :else[[Thesis]] }}} />\n</$list>\n\\end\n\n\n<$wikify name=bibtexEntryTiddler text=<<reference>> >\n<$set name=currentTiddler tiddler=<<bibtexEntryTiddler>> field=title emptyValue=\"RefNotFound\">\n<$reveal type=\"nomatch\" default=\"RefNotFound\" text=<<currentTiddler>> >\n<li><$link to=<<bibtexEntryTiddler>>><<show-authors-in-references>></$link> (<$text text={{{ [{!!bibtex-year}!is[blank]] :else[[n.d.]] }}}/>). <span style=\"font-style:italic;\"><$text  text={{{ [{!!bibtex-title}lowercase[]sentencecase[]] }}} /></span>. <<disp-thesis-type>>, <$view field=\"bibtex-school\"/>.</li>\n</$reveal>\n<$reveal type=\"match\" default=\"RefNotFound\" text=<<currentTiddler>> >\n<li>Reference <b><$text text=<<reference>>/></b> NOT FOUND. Check your input.</li>\n</$reveal>\n</$set></$wikify>\n\n<!-- Thesis, master and phd\nAuthor. (Year). //Title//. Phd Thesis, School. \nAuthor. (Year). //Title//. Master's Thesis, School. \n-->"},"$:/plugins/kookma/refnotes/templates/reflist/apa/website":{"title":"$:/plugins/kookma/refnotes/templates/reflist/apa/website","code-body":"yes","list":"website","tags":"$:/tags/Refnotes/ReflistTemplate","type":"text/vnd.tiddlywiki","text":"\\define retrieved-date()\n<$list filter=\"[<currentTiddler>has[bibtex-urldate]]\" variable=null>Retrieved <$text text={{{ [{!!bibtex-urldate}search-replace:g[.],[]search-replace:g[-],[]] :map[format:date[MMM 0DD, YYYY]] }}}/></$list><$list filter=\"[<currentTiddler>!has[bibtex-urldate]has[bibtex-note]]\" variable=null><$view field=\"bibtex-note\"/></$list><$list filter=\"[<currentTiddler>!has[bibtex-urldate]!has[bibtex-note]]\" variable=null>Retrieved n.d.</$list>\n\\end\n\n<$wikify name=bibtexEntryTiddler text=<<reference>> >\n<$set name=currentTiddler tiddler=<<bibtexEntryTiddler>> field=\"title\" emptyValue=\"RefNotFound\">\n<$reveal type=\"nomatch\" default=\"RefNotFound\" text=<<currentTiddler>> >\n<li><$link to=<<bibtexEntryTiddler>>><$text  text={{{ [{!!bibtex-title}lowercase[]sentencecase[]] }}} /></$link>. <<retrieved-date>>, <a href={{!!bibtex-url}} target=\"_blank\"><$text text={{!!bibtex-url}} /></a>.</li>\n</$reveal>\n<$reveal type=\"match\" default=\"RefNotFound\" text=<<currentTiddler>> >\n<li>Reference <b><$text text=<<reference>>/></b> NOT FOUND. Check your input.</li>\n</$reveal>\n</$set></$wikify>"},"$:/plugins/kookma/refnotes/templates/reflist/numbered/article":{"title":"$:/plugins/kookma/refnotes/templates/reflist/numbered/article","code-body":"yes","list":"article","tags":"","type":"text/vnd.tiddlywiki","text":"<$wikify name=bibtexEntryTiddler text=<<reference>> >\n<$set name=currentTiddler tiddler=<<bibtexEntryTiddler>> field=title emptyValue=\"RefNotFound\">\n<$reveal type=\"nomatch\" default=\"RefNotFound\" text=<<currentTiddler>> >\n<li><$view field=\"bibtex-author\"/>, <i><span style=\"text-transform: capitalize;\"><$view field=\"bibtex-title\"/></span></i>, <$view field=\"bibtex-journal\"/>, <$view field=\"bibtex-year\"/>.</li>\n</$reveal>\n<$reveal type=\"match\" default=\"RefNotFound\" text=<<currentTiddler>> >\n<li>Reference <b>$p$</b> NOT FOUND. Check your input.</li>\n</$reveal>\n</$set></$wikify>"},"$:/plugins/kookma/refnotes/templates/reflist/numbered/book":{"title":"$:/plugins/kookma/refnotes/templates/reflist/numbered/book","code-body":"yes","list":"book","tags":"","type":"text/vnd.tiddlywiki","text":"<$wikify name=bibtexEntryTiddler text=<<reference>> >\n<$set name=currentTiddler tiddler=<<bibtexEntryTiddler>> field=title emptyValue=\"RefNotFound\">\n<$reveal type=\"nomatch\" default=\"RefNotFound\" text=<<currentTiddler>> >\n<li><<show-authors-in-references>>, <span style=\"text-transform: capitalize;font-style:italic;\"><$view field=\"bibtex-title\"/></span>, <$view field=\"bibtex-edition\"/>, <$view field=\"bibtex-year\"/>, <$view field=\"bibtex-address\"/>, <$view field=\"bibtex-publisher\"/>.</li>\n</$reveal>\n<$reveal type=\"match\" default=\"RefNotFound\" text=<<currentTiddler>> >\n<li>Reference <b>$p$</b> NOT FOUND. Check your input.</li>\n</$reveal>\n</$set></$wikify>"},"$:/plugins/kookma/refnotes/templates/reflist/numbered/default":{"title":"$:/plugins/kookma/refnotes/templates/reflist/numbered/default","code-body":"yes","tags":"","type":"text/vnd.tiddlywiki","text":"<$wikify name=bibtexEntryTiddler text=<<reference>> >\n<$set name=currentTiddler tiddler=<<bibtexEntryTiddler>> field=\"title\" emptyValue=\"RefNotFound\">\n<$reveal type=\"nomatch\" default=\"RefNotFound\" text=<<currentTiddler>> >\n<li><$view field=\"bibtex-author\"/>, <span style=\"text-transform: capitalize;\"><$view field=\"bibtex-title\"/></span>,<i><$view field=\"bibtex-journal\"/></i>, <$view field=\"bibtex-year\"/>.</li>\n</$reveal>\n<$reveal type=\"match\" default=\"RefNotFound\" text=<<currentTiddler>> >\n<li>Reference <b>$p$</b> NOT FOUND. Check your input.</li>\n</$reveal>\n</$set></$wikify>"},"$:/plugins/kookma/refnotes/templates/reflist/numbered/website":{"title":"$:/plugins/kookma/refnotes/templates/reflist/numbered/website","code-body":"yes","list":"website","tags":"","type":"text/vnd.tiddlywiki","text":"<$wikify name=bibtexEntryTiddler text=<<reference>> >\n<$set name=\"curtid\" tiddler=<<bibtexEntryTiddler>> field=\"title\" emptyValue=\"RefNotFound\">\n<$reveal type=\"nomatch\" default=\"RefNotFound\" text=<<curtid>> >\n<li><span style=\"text-transform: capitalize;\"><$view field=\"bibtex-title\" tiddler=<<curtid>>/></span>, <a href={{{[<curtid>get[bibtex-url]]}}} target=\"_blank\"><$text text={{{ [<curtid>get[bibtex-url]] }}}/></a>, <$view field=\"bibtex-year\" tiddler=<<curtid>>/>.</li>\n</$reveal>\n<$reveal type=\"match\" default=\"RefNotFound\" text=<<curtid>> >\n<li>Reference <b>$p$</b> NOT FOUND. Check your input.</li>\n</$reveal>\n</$set></$wikify>"},"$:/plugins/kookma/refnotes/ui/bibtexlibrary":{"title":"$:/plugins/kookma/refnotes/ui/bibtexlibrary","caption":"Bibliography","tags":"$:/tags/SideBar","type":"text/vnd.tiddlywiki","text":"\\import [[$:/plugins/kookma/refnotes/macros/search-ui]]\n\n\\define dispEntry()\n<$link/>\n<$macrocall $name=stretchText text=\"\"\"\n<$view field=\"bibtex-author\"/>. (<$view field=\"bibtex-year\"/>). <$view field=\"bibtex-title\"/>.\"\"\" />\n\\end\n\n\n\\define searchFilter() [has[bibtex-title]search:$(sField)$[$(sTerm)$]]\n\n\\define bibLibrary()\n\\import [[$:/plugins/kookma/refnotes/macros/stretch-text]]\n<$vars sField={{{[<searchTid>get[field]] ~[[bibtex-author]]}}} sTerm={{{[<searchTid>get[text]]}}}>\n\n<!-- show hide entry details -->\n<div class=\"tc-search refnotes-library\" style=\"margin:10px 0 0 20px;\">\nShow and Hide Details: &nbsp;\n<$button class=\"tc-btn-invisible\" tooltip=\"show item details\">{{$:/core/images/down-arrow}}\n<$list filter=\"[subfilter<searchFilter>]\">\n<$action-setfield $tiddler=<<tmpTidDetails>> text=show />\n</$list>\n</$button>\n<$button class=\"tc-btn-invisible\" tooltip=\"hide item details\">{{$:/core/images/up-arrow}}\n<$list filter=\"[subfilter<searchFilter>]\">\n<$action-deletetiddler $tiddler=<<tmpTidDetails>> />\n</$list>\n</$button>\n</div>\n\n<!-- show the library data -->\n<ol>\n<$list filter=\"[subfilter<searchFilter>]\">\n<li><<dispEntry>></li>\n</$list>\n</ol>\n</$vars>\n\\end\n\n<!-- interface -->\n<div style=\"margin-bottom:8px;\">\n<<process-entries \"Process New Entries\">>\n{{$:/plugins/kookma/refnotes/ui/dropzone}}\n</div>\n\n<!-- make this optional\n[[Bibliography Table]]\n-->\n\n<<searchUi>>\n\n<<bibLibrary>>\n\n\n\n"},"$:/plugins/kookma/refnotes/ui/dropzone":{"title":"$:/plugins/kookma/refnotes/ui/dropzone","caption":"Dropzone","tags":"","type":"text/vnd.tiddlywiki","text":"<$dropzone \n  deserializer=\"application/x-bibtex\"\n  filesOnly=no \n\timportTitle=\"Import Bibtex\">\n<div class=\"bibtex-dropzone\" tabindex=1>\nPaste your Bibtex Entry here\n</div>\n</$dropzone>"},"$:/plugins/kookma/refnotes/viewtemplates/article":{"title":"$:/plugins/kookma/refnotes/viewtemplates/article","list":"article","tags":"$:/tags/Refnotes/Template","type":"text/vnd.tiddlywiki","text":"\\define mainFields() bibtex-title bibtex-author bibtex-journal bibtex-year bibtex-pages bibtex-number bibtex-volume bibtex-doi bibtex-entry-type\n\n<!-- display fields -->\n<$transclude tiddler=\"$:/plugins/kookma/refnotes/viewtemplates/helper\" mode=block/>"},"$:/plugins/kookma/refnotes/viewtemplates/book":{"title":"$:/plugins/kookma/refnotes/viewtemplates/book","list":"book","tags":"$:/tags/Refnotes/Template","type":"text/vnd.tiddlywiki","text":"\\define mainFields() bibtex-title bibtex-author bibtex-year bibtex-publisher bibtex-entry-type\n\n<$transclude tiddler=\"$:/plugins/kookma/refnotes/viewtemplates/helper\" mode=block/>"},"$:/plugins/kookma/refnotes/viewtemplates/default":{"title":"$:/plugins/kookma/refnotes/viewtemplates/default","tags":"$:/tags/Refnotes/Template","type":"text/vnd.tiddlywiki","text":"\\define mainFields() bibtex-title bibtex-author bibtex-year bibtex-doi bibtex-entry-type\n\n<!-- display fields -->\n<$transclude tiddler=\"$:/plugins/kookma/refnotes/viewtemplates/helper\" mode=block/>"},"$:/plugins/kookma/refnotes/viewtemplates/helper":{"title":"$:/plugins/kookma/refnotes/viewtemplates/helper","tags":"$:/tags/Refnotes/Template","type":"text/vnd.tiddlywiki","text":"\\define citedIn(refname)\n  <$vars pattern=\"\"\"<<ref[\\s\\['\"]*?$refname$['\"\\s\\]]*?.*>>\"\"\" >\n   <$list filter=\"[all[tiddlers]search:text:regexp<pattern>sort[title]]\" \n          template=\"$:/core/ui/ListItemTemplate\" \n          emptyMessage=\"\"\"//No tiddler has cited this reference//\"\"\" />\n  </$vars>\n\\end\n\n\\define display-bibtex-field()\n<div class=\"refnotes-bibtex-field\">\n<span><$text text={{{ [<currentField>removeprefix[bibtex-]titlecase[]] }}} /></span>\n<span><$transclude tiddler=<<currentTiddler>> field=<<currentField>> mode=inline /></span>\n</div>\n\\end\n\n<$let tv-wikilinks=\"no\">\n<!-- display main bibtex fields -->\n<$list filter=\"[enlist<mainFields>]\" variable=currentField>\n<<display-bibtex-field>>\n</$list>\n\n<!-- display other bibtex fields -->\n<details class=\"refnotes-details\">\n  <summary>More details</summary>\n<$list filter=\"[<currentTiddler>fields[]prefix[bibtex]sort[]] -[enlist<mainFields>]\" variable=currentField>\n<<display-bibtex-field>>\n</$list>\n</details>\n</$let>\n\n<!-- show the list of tiddlers cited this reference -->\n; Cited in\n: <$macrocall $name=citedIn refname=<<currentTiddler>> /> "},"$:/plugins/kookma/refnotes/viewtemplates/incollection":{"title":"$:/plugins/kookma/refnotes/viewtemplates/incollection","list":"incollection","tags":"$:/tags/Refnotes/Template","type":"text/vnd.tiddlywiki","text":"\\define mainFields() bibtex-title bibtex-author bibtex-year bibtex-booktitle bibtex-editor bibtex-publisher bibtex-doi bibtex-entry-type\n\n<$transclude tiddler=\"$:/plugins/kookma/refnotes/viewtemplates/helper\" mode=block/>"},"$:/plugins/kookma/refnotes/viewtemplates/inproceedings":{"title":"$:/plugins/kookma/refnotes/viewtemplates/inproceedings","list":"inproceedings","tags":"$:/tags/Refnotes/Template","type":"text/vnd.tiddlywiki","text":"\\define mainFields() bibtex-title bibtex-author bibtex-year bibtex-booktitle bibtex-editor bibtex-doi bibtex-entry-type\n\n<$transclude tiddler=\"$:/plugins/kookma/refnotes/viewtemplates/helper\" mode=block/>"},"$:/plugins/kookma/refnotes/viewtemplates/main":{"title":"$:/plugins/kookma/refnotes/viewtemplates/main","tags":"$:/tags/ViewTemplate","type":"text/vnd.tiddlywiki","text":"<$list filter=\"[all[current]has[bibtex-title]]\">\n<$vars currentType={{{[<currentTiddler>get[bibtex-entry-type]lowercase[]] ~[[miscellaneous]]}}} >\n<$set name=\"bodyLookup\" \n      filter=\"[all[tiddlers+shadows]tag[$:/tags/Refnotes/Template]contains:list<currentType>] +[limit[1]get[title]]\"\n\t\t\tvalue=<<bodyLookup>> \n      emptyValue=\"$:/plugins/kookma/refnotes/viewtemplates/default\">\t\t\n<$transclude tiddler=<<bodyLookup>> field=\"text\" mode=\"inline\"/>\n</$set>\n</$vars>\n</$list>"},"$:/plugins/kookma/refnotes/viewtemplates/thesis":{"title":"$:/plugins/kookma/refnotes/viewtemplates/thesis","list":"phdthesis mastersthesis thesis","tags":"$:/tags/Refnotes/Template","type":"text/vnd.tiddlywiki","text":"\\define mainFields() bibtex-title bibtex-author bibtex-year bibtex-school bibtex-entry-type\n\n<$transclude tiddler=\"$:/plugins/kookma/refnotes/viewtemplates/helper\" mode=block/>"},"$:/plugins/kookma/refnotes/viewtemplates/unpublished":{"title":"$:/plugins/kookma/refnotes/viewtemplates/unpublished","list":"unpublished","tags":"$:/tags/Refnotes/Template","type":"text/vnd.tiddlywiki","text":"\\define mainFields() bibtex-title bibtex-author bibtex-year bibtex-note bibtex-entry-type\n\n<$transclude tiddler=\"$:/plugins/kookma/refnotes/viewtemplates/helper\" mode=block/>"},"$:/plugins/kookma/refnotes/viewtemplates/website":{"title":"$:/plugins/kookma/refnotes/viewtemplates/website","list":"website","tags":"$:/tags/Refnotes/Template","type":"text/vnd.tiddlywiki","text":"\\define mainFields() bibtex-title bibtex-url bibtex-urldate bibtex-note  bibtex-entry-type\n\n<!-- display fields -->\n<$transclude tiddler=\"$:/plugins/kookma/refnotes/viewtemplates/helper\" mode=block/>"}}}